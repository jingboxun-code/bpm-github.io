<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³ä¹åˆ¶ä½œå·¥å…·ç®± | Suno AI Prompt + BPMè°ƒè¯•</title>
    <style>
        /* iOS ç³»ç»Ÿå­—ä½“ + å…¨å±€é‡ç½® */
        @font-face {
            font-family: 'SF Pro';
            src: local('SF Pro Display'), local('Helvetica Neue'), local('Arial'), sans-serif;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'SF Pro', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            -webkit-tap-highlight-color: rgba(0,0,0,0);
        }
        body {
            background: #f5f5f7;
            padding: 20px;
            max-width: 850px;
            margin: 0 auto;
            color: #1d1d1f;
        }
        /* å®¹å™¨ - iOS å¡ç‰‡é£æ ¼ */
        .container {
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            padding: 0;
            margin-top: 20px;
            overflow: hidden;
        }
        /* é¡¶éƒ¨Tabæ  */
        .tab-nav {
            display: flex;
            border-bottom: 1px solid #e6e6e8;
            background: #ffffff;
        }
        .tab-item {
            flex: 1;
            text-align: center;
            padding: 16px 0;
            font-size: 17px;
            font-weight: 500;
            color: #86868b;
            cursor: pointer;
            position: relative;
            transition: color 0.2s ease;
        }
        .tab-item.active {
            color: #0071e3;
        }
        .tab-item.active::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 32px;
            height: 3px;
            background: #0071e3;
            border-radius: 2px;
        }
        /* åŠŸèƒ½æ¨¡å—å®¹å™¨ */
        .tab-content {
            padding: 32px 24px;
            display: none;
        }
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* é€šç”¨æ ‡é¢˜æ ·å¼ */
        h1 {
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 32px;
            letter-spacing: -0.5px;
        }
        /* é€šç”¨é£æ ¼é€‰æ‹©å™¨ */
        .style-select {
            margin-bottom: 32px;
        }
        .style-select label {
            display: block;
            font-size: 15px;
            color: #86868b;
            margin-bottom: 8px;
            font-weight: 400;
        }
        .style-select select {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #e6e6e8;
            border-radius: 12px;
            font-size: 17px;
            color: #1d1d1f;
            background: #f9f9fb;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2386868b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            cursor: pointer;
            transition: border-color 0.2s ease;
        }
        .style-select select:focus {
            outline: none;
            border-color: #0071e3;
        }
        /* é€šç”¨å¤åˆ¶æŒ‰é’® */
        .copy-btn {
            padding: 10px 16px;
            background: #0071e3;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        .copy-btn:hover {
            background: #0077ed;
        }
        .copy-btn:active {
            background: #0066cc;
        }
        /* é€šç”¨æç¤ºå¼¹çª— */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #1d1d1f;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 15px;
            opacity: 0;
            transition: opacity 0.2s ease;
            pointer-events: none;
            z-index: 999;
        }
        .toast.show {
            opacity: 1;
        }
        /* ---------------- BPMè°ƒè¯•å™¨æ ·å¼ ---------------- */
        .bpm-control {
            margin-bottom: 25px;
        }
        .bpm-control label {
            display: block;
            color: #86868b;
            margin-bottom: 8px;
            font-weight: 400;
            font-size: 15px;
        }
        .bpm-slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: #e6e6e8;
            border-radius: 3px;
            margin: 16px 0;
            outline: none;
        }
        .bpm-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #0071e3;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: transform 0.1s ease;
        }
        .bpm-slider::-webkit-slider-thumb:active {
            transform: scale(1.1);
        }
        .bpm-value {
            display: flex;
            align-items: center;
            gap: 12px;
            justify-content: center;
            margin-bottom: 8px;
        }
        .bpm-value input {
            width: 88px;
            padding: 10px 12px;
            border: 1px solid #e6e6e8;
            border-radius: 10px;
            font-size: 20px;
            text-align: center;
            background: #f9f9fb;
            color: #1d1d1f;
            font-weight: 600;
        }
        .bpm-value input:focus {
            outline: none;
            border-color: #0071e3;
        }
        .bpm-value span {
            font-size: 17px;
            color: #86868b;
        }
        .bpm-range {
            color: #86868b;
            font-size: 14px;
            text-align: center;
        }
        .control-btn {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 36px;
        }
        button {
            padding: 14px 32px;
            border: none;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        #playBtn {
            background: #0071e3;
            color: white;
        }
        #playBtn:hover {
            background: #0077ed;
        }
        #playBtn:active {
            background: #0066cc;
        }
        #pauseBtn {
            background: #f1f1f3;
            color: #1d1d1f;
        }
        #pauseBtn:hover {
            background: #e9e9eb;
        }
        #pauseBtn:active {
            background: #dcdcde;
        }
        .rhythm-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 16px;
            margin-top: 8px;
        }
        .beat {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #f1f1f3;
            transition: all 0.15s cubic-bezier(0.25, 0.1, 0.25, 1);
        }
        .beat.active {
            background: #0071e3;
            transform: scale(1.2);
            box-shadow: 0 2px 8px rgba(0, 113, 227, 0.3);
        }
        .bpm-tips {
            margin-top: 32px;
            color: #86868b;
            font-size: 14px;
            line-height: 1.6;
            text-align: center;
        }
        /* ---------------- æ—‹å¾‹æ›²åº“æ ·å¼ ---------------- */
        .update-group {
            display: flex;
            justify-content: center;
            margin-bottom: 28px;
            gap: 12px;
        }
        #updateBtn {
            padding: 12px 24px;
            background: #0071e3;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        #updateBtn:hover {
            background: #0077ed;
        }
        #updateBtn:active {
            background: #0066cc;
        }
        #updateBtn:disabled {
            background: #e6e6e8;
            color: #86868b;
            cursor: not-allowed;
        }
        .prompt-section {
            margin-bottom: 32px;
        }
        .prompt-card {
            background: #f9f9fb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            border: 1px solid #e6e6e8;
        }
        .prompt-card h3 {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #1d1d1f;
        }
        .prompt-card p {
            font-size: 15px;
            color: #424245;
            line-height: 1.6;
            margin-bottom: 16px;
            white-space: pre-wrap;
        }
        .style-note {
            font-size: 14px;
            color: #86868b;
            line-height: 1.6;
            margin-top: 8px;
            padding-top: 16px;
            border-top: 1px solid #e6e6e8;
        }
        /* ---------------- é£æ ¼æ›²åº“æ ·å¼ ---------------- */
        .keyword-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        @media (max-width: 680px) {
            .keyword-grid {
                grid-template-columns: 1fr;
            }
        }
        .keyword-card {
            background: #f9f9fb;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #e6e6e8;
        }
        .keyword-card h3 {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #1d1d1f;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .keyword-card h3::before {
            content: "";
            display: inline-block;
            width: 4px;
            height: 18px;
            background: #0071e3;
            border-radius: 2px;
        }
        .keyword-card p {
            font-size: 15px;
            color: #424245;
            line-height: 1.6;
            margin-bottom: 16px;
            white-space: pre-wrap;
        }
        /* å“åº”å¼é€‚é… */
        @media (max-width: 480px) {
            .container {
                padding: 0;
            }
            .tab-content {
                padding: 24px 16px;
            }
            h1 {
                font-size: 24px;
                margin-bottom: 28px;
            }
            .control-btn {
                flex-direction: column;
                gap: 12px;
            }
            button {
                width: 100%;
            }
            .rhythm-visual {
                gap: 12px;
            }
            .beat {
                width: 32px;
                height: 32px;
            }
            .update-group {
                flex-direction: column;
            }
            #updateBtn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨Tabå¯¼èˆª -->
        <div class="tab-nav">
            <div class="tab-item active" data-tab="bpm">BPMè°ƒè¯•å™¨</div>
            <div class="tab-item" data-tab="melody">æ—‹å¾‹æ›²åº“</div>
            <div class="tab-item" data-tab="arrange">é£æ ¼æ›²åº“</div>
        </div>

        <!-- 1. BPMè°ƒè¯•å™¨æ¨¡å— -->
        <div class="tab-content active" id="bpm-content">
            <h1>BPMè°ƒè¯•å™¨</h1>
            
            <!-- é£æ ¼é€‰æ‹© -->
            <div class="style-select">
                <label for="bpmStyleType">é€‰æ‹©éŸ³ä¹é£æ ¼ï¼ˆè‡ªåŠ¨åŒ¹é…BPMé˜ˆå€¼ï¼‰</label>
                <select id="bpmStyleType">
                    <option value="default" selected>é€šç”¨é»˜è®¤ - 90 BPM</option>
                    <option value="pop">æµè¡Œ (Pop) - 80-120 BPM</option>
                    <option value="jazz">çˆµå£« (Jazz) - 60-90 BPM</option>
                    <option value="melancholic">ä¼¤æ„ŸæŠ’æƒ… - 60-85 BPM</option>
                    <option value="upbeat">åŠ¨æ„ŸèŠ‚å¥ - 110-150 BPM</option>
                    <option value="hiphop">å˜»å“ˆ (HipHop) - 85-95 BPM</option>
                    <option value="rnb">èŠ‚å¥å¸ƒé²æ–¯ (R&B) - 70-85 BPM</option>
                    <option value="edm">ç”µå­èˆæ›² (EDM) - 128-140 BPM</option>
                    <option value="folk">æ°‘è°£ (Folk) - 70-90 BPM</option>
                    <option value="rock">æ‘‡æ»š (Rock) - 100-130 BPM</option>
                    <option value="classical">å¤å…¸ (Classical) - 50-80 BPM</option>
                    <option value="country">ä¹¡æ‘ (Country) - 80-100 BPM</option>
                </select>
            </div>

            <!-- BPMæ§åˆ¶ -->
            <div class="bpm-control">
                <label for="bpmSlider">è°ƒæ•´BPMæ•°å€¼</label>
                <input type="range" id="bpmSlider" class="bpm-slider" min="40" max="200" value="90">
                <div class="bpm-value">
                    <input type="number" id="bpmInput" min="40" max="200" value="90">
                    <span>BPM</span>
                </div>
                <div class="bpm-range" id="bpmRange">å½“å‰é£æ ¼é˜ˆå€¼ï¼šæ— å›ºå®šé˜ˆå€¼ï¼ˆé€šç”¨é»˜è®¤ï¼‰</div>
            </div>

            <!-- æ’­æ”¾æ§åˆ¶ -->
            <div class="control-btn">
                <button id="playBtn">æ’­æ”¾èŠ‚å¥</button>
                <button id="pauseBtn">æš‚åœèŠ‚å¥</button>
            </div>

            <!-- èŠ‚å¥è§†è§‰åŒ– -->
            <div class="rhythm-visual">
                <div class="beat" id="beat1"></div>
                <div class="beat" id="beat2"></div>
                <div class="beat" id="beat3"></div>
                <div class="beat" id="beat4"></div>
            </div>

            <div class="bpm-tips">
                4/4æ‹èŠ‚å¥ï¼ˆåº•é¼“1ã€3æ‹ï¼Œå†›é¼“2ã€4æ‹ï¼‰| è°ƒæ•´BPMå®æ—¶åŒæ­¥èŠ‚å¥ä¸è§†è§‰åé¦ˆ
            </div>
        </div>

        <!-- 2. æ—‹å¾‹æ›²åº“æ¨¡å— -->
        <div class="tab-content" id="melody-content">
            <h1>æ—‹å¾‹æ›²åº“ | Suno AI Prompt</h1>
            
            <!-- ä¸€é”®æ›´æ–°æŒ‰é’® -->
            <div class="update-group">
                <button id="updateBtn">ä¸€é”®æ›´æ–°æœ€æ–°å…³é”®è¯</button>
            </div>

            <!-- é£æ ¼é€‰æ‹© -->
            <div class="style-select">
                <label for="melodyStyleType">é€‰æ‹©æ›²é£ï¼ˆ2020-2025å…¨çƒæµè¡Œè¶‹åŠ¿ï¼‰</label>
                <select id="melodyStyleType">
                    <option value="global-pop" selected>å…¨çƒæµè¡Œ (Global Pop)</option>
                    <option value="alt-rock">å¦ç±»æ‘‡æ»š (Alternative Rock)</option>
                    <option value="hiphop">å½“ä»£å˜»å“ˆ (Contemporary HipHop)</option>
                    <option value="electronic">æµè¡Œç”µå­ (Pop Electronic)</option>
                    <option value="jazz">ç°ä»£çˆµå£« (Modern Jazz)</option>
                    <option value="rnb">æ–°ç”Ÿä»£R&B (New Gen R&B)</option>
                    <option value="folk-pop">æ°‘è°£æµè¡Œ (Folk Pop)</option>
                </select>
            </div>

            <!-- Promptå±•ç¤ºåŒº -->
            <div class="prompt-section" id="promptContent">
                <div class="prompt-card">
                    <h3>æ ¸å¿ƒPromptæ¨¡æ¿ï¼ˆå³æ‹¿å³ç”¨ï¼‰</h3>
                    <p>Catchy global pop melody, 2023-2025 trend, upbeat but emotional, 92 BPM, melodic hook with ascending vocal line, simple chord progression (I-V-vi-IV), bright synth lead, warm acoustic guitar underlay, radio-ready, high singability, male/female vocal friendly</p>
                    <button class="copy-btn" onclick="copyMelodyPrompt(this)">å¤åˆ¶æ¨¡æ¿</button>
                </div>
                <div class="prompt-card">
                    <h3>ç»å…¸æ—‹å¾‹åŠ¨æœºå…³é”®è¯</h3>
                    <p>memorable 4-note melodic motif, chorus with repetitive hook phrase, verse with stepwise melody movement, pre-chorus build-up with pitch rise, bridge with melodic variation, minimal ornamentation, clean melodic line</p>
                    <button class="copy-btn" onclick="copyMelodyPrompt(this)">å¤åˆ¶å…³é”®è¯</button>
                </div>
                <div class="prompt-card">
                    <h3>è¿›é˜¶è°ƒæ•´å…³é”®è¯ï¼ˆé€‚é…Sunoï¼‰</h3>
                    <p>melodic range: mid-high (C4-F5), legato phrasing, subtle vibrato on long notes, syncopated rhythm in chorus, melodic call-and-response, consonant harmony, pop cadence (V-I)</p>
                    <button class="copy-btn" onclick="copyMelodyPrompt(this)">å¤åˆ¶è°ƒæ•´è¯</button>
                </div>
                <div class="style-note" id="melodyNote">
                    é£æ ¼è¯´æ˜ï¼š2020-2025å…¨çƒæµè¡Œæ—‹å¾‹ç‰¹å¾â€”â€”çŸ­ä¹å¥+é«˜è®°å¿†ç‚¹hookã€I-V-vi-IVç»å…¸å’Œå¼¦èµ°å‘ã€ä¸­é«˜éŸ³åŒºæ—‹å¾‹çº¿ï¼Œå…¼é¡¾æŠ’æƒ…ä¸å¾‹åŠ¨ï¼Œé€‚é…æ¬§ç¾/åè¯­ä¸»æµæµè¡Œæ›²èŒƒå¼ã€‚
                </div>
            </div>
        </div>

        <!-- 3. é£æ ¼æ›²åº“æ¨¡å— -->
        <div class="tab-content" id="arrange-content">
            <h1>é£æ ¼æ›²åº“ | ç¼–æ›²å…³é”®è¯å·¥å…·</h1>
            
            <!-- é£æ ¼é€‰æ‹© -->
            <div class="style-select">
                <label for="arrangeStyleType">é€‰æ‹©ç¼–æ›²é£æ ¼ï¼ˆ2020-2025ä¸»æµè¶‹åŠ¿ï¼‰</label>
                <select id="arrangeStyleType">
                    <option value="global-pop" selected>å…¨çƒæµè¡Œ (Global Pop)</option>
                    <option value="alt-rock">å¦ç±»æ‘‡æ»š (Alternative Rock)</option>
                    <option value="hiphop">å½“ä»£å˜»å“ˆ (Contemporary HipHop)</option>
                    <option value="electronic">æµè¡Œç”µå­ (Pop Electronic)</option>
                    <option value="melancholic">ä¼¤æ„ŸæŠ’æƒ… (Melancholic Pop)</option>
                    <option value="chinese-folk">å›½é£æµè¡Œ (Chinese Folk Pop)</option>
                    <option value="rnb">æ–°ç”Ÿä»£R&B (New Gen R&B)</option>
                    <option value="folk-pop">æ°‘è°£æµè¡Œ (Folk Pop)</option>
                </select>
            </div>

            <!-- å…³é”®è¯å¡ç‰‡ç»„ -->
            <div class="keyword-grid" id="keywordContent">
                <div class="keyword-card">
                    <h3>ç¼–æ›²æ¨¡æ¿</h3>
                    <p>Acoustic guitar-led pop arrangement, 92 BPM, verse: fingerpicking + soft bass + light shaker, chorus: full strumming + electronic drums + bright synth pad + backing vocals, bridge: stripped down (guitar + vocal) + build up to climax, radio-ready mix, high singability</p>
                    <button class="copy-btn" onclick="copyArrangePrompt(this)">å¤åˆ¶</button>
                </div>
                <div class="keyword-card">
                    <h3>æ ¸å¿ƒå’Œå¼¦</h3>
                    <p>I-V-vi-IV (C-G-Am-F), vi-IV-I-V (Am-F-C-G), ii-V-I (Dm-G-C), simple 4-chord progression, consonant harmony, pop cadence</p>
                    <button class="copy-btn" onclick="copyArrangePrompt(this)">å¤åˆ¶</button>
                </div>
                <div class="keyword-card">
                    <h3>èŠ‚å¥å‹</h3>
                    <p>4/4 time, steady 8th note groove, soft kick on 1&3, crisp clap on 2&4, shaker on off-beats, syncopated bass line, verse: laid-back rhythm, chorus: driving beat</p>
                    <button class="copy-btn" onclick="copyArrangePrompt(this)">å¤åˆ¶</button>
                </div>
                <div class="keyword-card">
                    <h3>åœºæ™¯å…³é”®è¯</h3>
                    <p>Upbeat but emotional, nostalgic, summer vibe, urban pop, radio-friendly, intimate storytelling, uplifting chorus, warm and bright atmosphere</p>
                    <button class="copy-btn" onclick="copyArrangePrompt(this)">å¤åˆ¶</button>
                </div>
            </div>

            <!-- é£æ ¼è¯´æ˜ -->
            <div class="style-note" id="arrangeNote">
                é£æ ¼è¯´æ˜ï¼š2020-2025å…¨çƒæµè¡Œç¼–æ›²ç‰¹å¾â€”â€”å‰ä»–ä¸»å¯¼+è½»ç”µå­å…ƒç´ èåˆï¼Œ4å’Œå¼¦ç»å…¸èµ°å‘ï¼Œç¨³å®šçš„8åˆ†éŸ³ç¬¦å¾‹åŠ¨ï¼Œå…¼é¡¾æŠ’æƒ…ä¸å¾‹åŠ¨ï¼Œé€‚é…Taylor Swift/Dua Lipaç­‰ä¸»æµæµè¡Œé£æ ¼ã€‚
            </div>
        </div>
    </div>

    <!-- é€šç”¨æç¤ºå¼¹çª— -->
    <div class="toast" id="copyToast">å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ âœ…</div>
    <div class="toast" id="updateToast">æ›´æ–°æˆåŠŸï¼å·²åŠ è½½æœ€æ–°å…³é”®è¯ ğŸ‰</div>
    <div class="toast" id="errorToast">æ›´æ–°å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯• âŒ</div>

    <script>
        // ---------------- é€šç”¨Tabåˆ‡æ¢é€»è¾‘ ----------------
        const tabItems = document.querySelectorAll('.tab-item');
        const tabContents = document.querySelectorAll('.tab-content');

        tabItems.forEach(item => {
            item.addEventListener('click', () => {
                // ç§»é™¤æ‰€æœ‰activeçŠ¶æ€
                tabItems.forEach(tab => tab.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                // æ·»åŠ å½“å‰activeçŠ¶æ€
                item.classList.add('active');
                const tabId = item.getAttribute('data-tab');
                document.getElementById(`${tabId}-content`).classList.add('active');
            });
        });

        // ---------------- é€šç”¨å¤åˆ¶æç¤ºé€»è¾‘ ----------------
        function showToast(toastId, duration = 1500) {
            const toast = document.getElementById(toastId);
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // ---------------- 1. BPMè°ƒè¯•å™¨æ ¸å¿ƒé€»è¾‘ ----------------
        // BPMé£æ ¼é…ç½®è¡¨
        const bpmStyleConfig = {
            default: { min: 40, max: 200, default: 90 },
            pop: { min: 80, max: 120, default: 90 },
            jazz: { min: 60, max: 90, default: 75 },
            melancholic: { min: 60, max: 85, default: 70 },
            upbeat: { min: 110, max: 150, default: 128 },
            hiphop: { min: 85, max: 95, default: 90 },
            rnb: { min: 70, max: 85, default: 80 },
            edm: { min: 128, max: 140, default: 128 },
            folk: { min: 70, max: 90, default: 80 },
            rock: { min: 100, max: 130, default: 110 },
            classical: { min: 50, max: 80, default: 65 },
            country: { min: 80, max: 100, default: 90 }
        };

        // BPM DOMå…ƒç´ 
        const bpmStyleSelect = document.getElementById('bpmStyleType');
        const bpmSlider = document.getElementById('bpmSlider');
        const bpmInput = document.getElementById('bpmInput');
        const bpmRange = document.getElementById('bpmRange');
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const beats = [
            document.getElementById('beat1'),
            document.getElementById('beat2'),
            document.getElementById('beat3'),
            document.getElementById('beat4')
        ];

        // BPMéŸ³é¢‘ç›¸å…³
        let audioContext;
        let isPlaying = false;
        let beatInterval;
        let currentBeat = 0;

        // åˆ›å»ºé¼“ç‚¹éŸ³è‰²
        function createDrumSound(type) {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            if (type === 'kick') {
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(100, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(20, audioContext.currentTime + 0.2);
                gainNode.gain.setValueAtTime(0.8, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
            } else if (type === 'snare') {
                oscillator.type = 'square';
                oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            }

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.2);
        }

        // BPMé£æ ¼åˆ‡æ¢
        bpmStyleSelect.addEventListener('change', function() {
            const style = this.value;
            const config = bpmStyleConfig[style];
            
            bpmSlider.value = config.default;
            bpmInput.value = config.default;
            
            if (style === 'default') {
                bpmRange.textContent = `å½“å‰é£æ ¼é˜ˆå€¼ï¼šæ— å›ºå®šé˜ˆå€¼ï¼ˆé€šç”¨é»˜è®¤ï¼‰`;
            } else {
                bpmRange.textContent = `å½“å‰é£æ ¼é˜ˆå€¼ï¼š${config.min} - ${config.max} BPM`;
            }
        });

        // BPMæ»‘å—ä¸è¾“å…¥æ¡†è”åŠ¨
        bpmSlider.addEventListener('input', function() {
            bpmInput.value = this.value;
        });

        bpmInput.addEventListener('input', function() {
            let value = parseInt(this.value) || 90;
            if (value < 40) value = 40;
            if (value > 200) value = 200;
            this.value = value;
            bpmSlider.value = value;
        });

        // æ’­æ”¾èŠ‚å¥
        function playRhythm() {
            if (isPlaying) return;
            isPlaying = true;
            
            const bpm = parseInt(bpmInput.value) || 90;
            const beatMs = (60 / bpm) * 1000;

            if (beatInterval) clearInterval(beatInterval);
            
            beatInterval = setInterval(() => {
                beats.forEach(beat => beat.classList.remove('active'));
                beats[currentBeat].classList.add('active');
                
                if (currentBeat === 0 || currentBeat === 2) {
                    createDrumSound('kick');
                } else {
                    createDrumSound('snare');
                }

                currentBeat = (currentBeat + 1) % 4;
            }, beatMs);
        }

        // æš‚åœèŠ‚å¥
        function pauseRhythm() {
            if (!isPlaying) return;
            isPlaying = false;
            clearInterval(beatInterval);
            beats.forEach(beat => beat.classList.remove('active'));
            currentBeat = 0;
        }

        // BPMæŒ‰é’®ç»‘å®š
        playBtn.addEventListener('click', playRhythm);
        pauseBtn.addEventListener('click', pauseRhythm);

        // ---------------- 2. æ—‹å¾‹æ›²åº“æ ¸å¿ƒé€»è¾‘ ----------------
        // æ—‹å¾‹åº“åˆå§‹æ•°æ®
        let melodyPromptLib = {
            "global-pop": {
                template: `Catchy global pop melody, 2023-2025 trend, upbeat but emotional, 92 BPM, melodic hook with ascending vocal line, simple chord progression (I-V-vi-IV), bright synth lead, warm acoustic guitar underlay, radio-ready, high singability, male/female vocal friendly`,
                motif: `memorable 4-note melodic motif, chorus with repetitive hook phrase, verse with stepwise melody movement, pre-chorus build-up with pitch rise, bridge with melodic variation, minimal ornamentation, clean melodic line`,
                adjust: `melodic range: mid-high (C4-F5), legato phrasing, subtle vibrato on long notes, syncopated rhythm in chorus, melodic call-and-response, consonant harmony, pop cadence (V-I)`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025å…¨çƒæµè¡Œæ—‹å¾‹ç‰¹å¾â€”â€”çŸ­ä¹å¥+é«˜è®°å¿†ç‚¹hookã€I-V-vi-IVç»å…¸å’Œå¼¦èµ°å‘ã€ä¸­é«˜éŸ³åŒºæ—‹å¾‹çº¿ï¼Œå…¼é¡¾æŠ’æƒ…ä¸å¾‹åŠ¨ï¼Œé€‚é…æ¬§ç¾/åè¯­ä¸»æµæµè¡Œæ›²èŒƒå¼ã€‚`
            },
            "alt-rock": {
                template: `Alternative rock melody, 2020-2025 indie trend, 105 BPM, gritty guitar-driven melody, minor key (A minor), melodic tension in verse, explosive chorus hook, raw vocal delivery, distorted guitar riffs, moderate melodic range (A3-D5), grunge-influenced phrasing`,
                motif: `7-note descending melodic motif, chorus with sustained long notes, verse with staccato rhythm, bridge with melodic climax (pitch peak), call-and-response between guitar and vocal, dissonant harmony accents`,
                adjust: `melodic range: mid-low to mid-high (A3-D5), aggressive vibrato, syncopated guitar-vocal sync, rock cadence (vi-IV-I-V), slight pitch bend on guitar notes, vocal rasp on chorus`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025å¦ç±»æ‘‡æ»šæ—‹å¾‹ç‰¹å¾â€”â€”å°è°ƒåŸºè°ƒã€å‰ä»–ä¸»å¯¼çš„å¼ åŠ›æ—‹å¾‹ã€ä¸»æ­Œæ–­å¥+å‰¯æ­Œçˆ†å‘ï¼Œèåˆ90å¹´ä»£grungeä¸ç°ä»£indieè´¨æ„Ÿï¼Œé€‚é…Billie Eilish/Fontaines D.C.é£æ ¼ã€‚`
            },
            "hiphop": {
                template: `Contemporary HipHop melody, 2022-2025 trap/pop rap trend, 88 BPM, melodic rap flow, minor pentatonic scale (E minor), smooth vocal melody over trap beat, catchy 8-bar hook, minimal melodic ornamentation, bass-heavy underlay, mid-range vocal tone`,
                motif: `5-note repetitive melodic loop, verse with rhythmic rap melody (syncopated), chorus with sung melodic hook, melodic pause on downbeat, stepwise melody movement (no large leaps), trap-style melodic cadence`,
                adjust: `melodic range: mid (D4-G4), relaxed legato phrasing, subtle auto-tune effect, melodic sync with 808 kick, off-beat melodic accents, consonant trap harmony (i-v-vi-iv)`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025å½“ä»£å˜»å“ˆæ—‹å¾‹ç‰¹å¾â€”â€”æ—‹å¾‹è¯´å”±ï¼ˆMelodic Rapï¼‰ä¸ºä¸»ã€äº”å£°éŸ³é˜¶å°è°ƒå¾ªç¯ã€8å°èŠ‚æŠ“è€³hookï¼Œé€‚é…Post Malone/Jack Harlowé£æ ¼ï¼Œå…¼é¡¾è¯´å”±å¾‹åŠ¨ä¸æµè¡Œæ—‹å¾‹æ€§ã€‚`
            },
            "electronic": {
                template: `Pop electronic melody, 2021-2025 EDM/pop crossover, 128 BPM, euphoric synth melody, major key (F major), uplifting chorus hook, arpeggiated verse melody, drop section with melodic climax, bright synth lead, melodic build-up pre-drop`,
                motif: `8-note ascending arpeggio motif, chorus with sustained high notes, verse with fast arpeggiated melody, bridge with melodic breakdown, call-and-response between synth and vocal, electronic cadence (I-IV-vi-V)`,
                adjust: `melodic range: high (C5-A5), staccato arpeggio phrasing, legato vocal melody, synth glide on long notes, melodic sync with 4/4 electronic beat, reverb-drenched melodic layers`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025æµè¡Œç”µå­æ—‹å¾‹ç‰¹å¾â€”â€”é«˜å…«åº¦ euphoric åˆæˆå™¨æ—‹å¾‹ã€ç¶éŸ³ä¸»å¯¼ä¸»æ­Œã€å‰¯æ­Œé•¿éŸ³çˆ†å‘ï¼Œé€‚é…David Guetta/Marshmelloçš„EDM-Popèåˆé£æ ¼ï¼Œå¼ºè°ƒæ—‹å¾‹çš„â€œé£å‡æ„Ÿâ€ã€‚`
            },
            "jazz": {
                template: `Modern jazz melody, 2020-2025 neo-soul/jazz fusion, 78 BPM, chromatic melodic line, mixolydian mode (G mixolydian), smooth vocal melody over jazz chords, improvisational chorus variation, warm piano underlay, melodic rubato phrasing`,
                motif: `9-note chromatic melodic motif, verse with stepwise chromatic movement, chorus with melodic improvisation, bridge with modal shift, call-and-response between piano and vocal, jazz cadence (ii-V-I)`,
                adjust: `melodic range: mid (Bb3-E5), legato rubato phrasing, subtle vocal scatting, blue note accents (flat 3rd/7th), melodic sync with swing rhythm, extended chord harmony (9th/11th chords)`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025ç°ä»£çˆµå£«æ—‹å¾‹ç‰¹å¾â€”â€”åŠéŸ³åŒ–æ—‹å¾‹çº¿ã€æ··åˆåˆ©åº•äºšè°ƒå¼ã€rubatoè‡ªç”±èŠ‚å¥ï¼Œèåˆneo-soulè´¨æ„Ÿï¼Œé€‚é…Tom Misch/Bill Evansé£æ ¼ï¼Œå¼ºè°ƒæ—‹å¾‹çš„å³å…´ä¸é¡ºæ»‘ã€‚`
            },
            "rnb": {
                template: `New gen R&B melody, 2022-2025 alternative R&B trend, 75 BPM, sultry vocal melody, minor key (B minor), breathy phrasing, slow melodic build-up, chorus with falsetto hook, warm Rhodes piano underlay, melodic tension & release`,
                motif: `6-note descending melodic motif, verse with whispered melody, chorus with falsetto peak (F5), bridge with melodic ad-libs, call-and-response between vocal layers, R&B cadence (vi-ii-V-I)`,
                adjust: `melodic range: mid to high (A3-F5), breathy legato phrasing, vocal runs on long notes, syncopated melodic rhythm, subtle pitch slides, neo-soul harmony (7th/9th chords)`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025æ–°ç”Ÿä»£R&Bæ—‹å¾‹ç‰¹å¾â€”â€”æ…µæ‡’æ°”å£°æ—‹å¾‹ã€å‡å£°å‰¯æ­Œhookã€åŠéŸ³æ»‘éŸ³ï¼Œé€‚é…SZA/Bryson Tilleré£æ ¼ï¼Œå¼ºè°ƒæ—‹å¾‹çš„â€œæ¾å¼›æ„Ÿâ€ä¸æƒ…æ„Ÿå¼ åŠ›ã€‚`
            },
            "folk-pop": {
                template: `Folk pop melody, 2021-2025 acoustic trend, 85 BPM, warm acoustic guitar melody, major key (G major), storytelling vocal melody, simple melodic line, chorus with harmonized hook, fingerpicked guitar underlay, organic melodic phrasing`,
                motif: `5-note folk melodic motif (pentatonic), verse with conversational melody, chorus with ascending harmonized line, bridge with melodic simplification, call-and-response between guitar and vocal, folk cadence (I-IV-V)`,
                adjust: `melodic range: mid (G3-C5), legato conversational phrasing, minimal vibrato, melodic sync with fingerpicked guitar, natural vocal tone, open chord harmony`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025æ°‘è°£æµè¡Œæ—‹å¾‹ç‰¹å¾â€”â€”äº”å£°éŸ³é˜¶ç®€å•æ—‹å¾‹çº¿ã€å™äº‹æ€§ä¸»æ­Œ+å’Œå£°å‰¯æ­Œï¼Œé€‚é…Olivia Rodrigo/Vance Joyé£æ ¼ï¼Œå¼ºè°ƒæ—‹å¾‹çš„â€œè´¨æœ´æ„Ÿâ€ä¸ä¼ å”±åº¦ã€‚`
            }
        };

        // å¤åˆ¶æ—‹å¾‹Prompt
        function copyMelodyPrompt(btn) {
            const promptText = btn.previousElementSibling.textContent;
            navigator.clipboard.writeText(promptText).then(() => {
                showToast('copyToast');
            });
        }

        // æ¸²æŸ“æ—‹å¾‹Prompt
        function renderMelodyContent(style) {
            const promptData = melodyPromptLib[style];
            const promptContent = document.getElementById('promptContent');
            
            promptContent.innerHTML = `
                <div class="prompt-card">
                    <h3>æ ¸å¿ƒPromptæ¨¡æ¿ï¼ˆå³æ‹¿å³ç”¨ï¼‰</h3>
                    <p>${promptData.template}</p>
                    <button class="copy-btn" onclick="copyMelodyPrompt(this)">å¤åˆ¶æ¨¡æ¿</button>
                </div>
                <div class="prompt-card">
                    <h3>ç»å…¸æ—‹å¾‹åŠ¨æœºå…³é”®è¯</h3>
                    <p>${promptData.motif}</p>
                    <button class="copy-btn" onclick="copyMelodyPrompt(this)">å¤åˆ¶å…³é”®è¯</button>
                </div>
                <div class="prompt-card">
                    <h3>è¿›é˜¶è°ƒæ•´å…³é”®è¯ï¼ˆé€‚é…Sunoï¼‰</h3>
                    <p>${promptData.adjust}</p>
                    <button class="copy-btn" onclick="copyMelodyPrompt(this)">å¤åˆ¶è°ƒæ•´è¯</button>
                </div>
                <div class="style-note" id="melodyNote">
                    ${promptData.note}
                </div>
            `;
        }

        // æ—‹å¾‹é£æ ¼åˆ‡æ¢
        document.getElementById('melodyStyleType').addEventListener('change', function() {
            renderMelodyContent(this.value);
        });

        // ä¸€é”®æ›´æ–°æ—‹å¾‹åº“
        async function updateMelodyLib() {
            const updateBtn = document.getElementById('updateBtn');
            updateBtn.disabled = true;
            updateBtn.textContent = "æ›´æ–°ä¸­...";

            try {
                // æ›¿æ¢ä¸ºä½ çš„åç«¯æ¥å£åœ°å€
                const response = await fetch('http://localhost:3000/api/melodyLib', {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' },
                    timeout: 10000
                });

                if (response.ok) {
                    const newLib = await response.json();
                    melodyPromptLib = newLib;
                    renderMelodyContent(document.getElementById('melodyStyleType').value);
                    showToast('updateToast', 2000);
                    localStorage.setItem('melodyPromptLib', JSON.stringify(newLib));
                } else {
                    throw new Error('æ¥å£è¿”å›å¼‚å¸¸');
                }
            } catch (error) {
                console.error('æ›´æ–°å¤±è´¥ï¼š', error);
                showToast('errorToast', 2000);
                const cachedLib = localStorage.getItem('melodyPromptLib');
                if (cachedLib) {
                    melodyPromptLib = JSON.parse(cachedLib);
                }
            } finally {
                updateBtn.disabled = false;
                updateBtn.textContent = "ä¸€é”®æ›´æ–°æœ€æ–°å…³é”®è¯";
            }
        }

        // ç»‘å®šæ›´æ–°æŒ‰é’®
        document.getElementById('updateBtn').addEventListener('click', updateMelodyLib);

        // åˆå§‹åŒ–æ—‹å¾‹åº“ï¼ˆè¯»å–ç¼“å­˜ï¼‰
        window.onload = function() {
            const cachedLib = localStorage.getItem('melodyPromptLib');
            if (cachedLib) {
                melodyPromptLib = JSON.parse(cachedLib);
                renderMelodyContent('global-pop');
            }
        };

        // ---------------- 3. é£æ ¼æ›²åº“æ ¸å¿ƒé€»è¾‘ ----------------
        // ç¼–æ›²åº“æ•°æ®
        const arrangeLib = {
            "global-pop": {
                arrange: `Acoustic guitar-led pop arrangement, 92 BPM, verse: fingerpicking + soft bass + light shaker, chorus: full strumming + electronic drums + bright synth pad + backing vocals, bridge: stripped down (guitar + vocal) + build up to climax, radio-ready mix, high singability`,
                chord: `I-V-vi-IV (C-G-Am-F), vi-IV-I-V (Am-F-C-G), ii-V-I (Dm-G-C), simple 4-chord progression, consonant harmony, pop cadence`,
                rhythm: `4/4 time, steady 8th note groove, soft kick on 1&3, crisp clap on 2&4, shaker on off-beats, syncopated bass line, verse: laid-back rhythm, chorus: driving beat`,
                scene: `Upbeat but emotional, nostalgic, summer vibe, urban pop, radio-friendly, intimate storytelling, uplifting chorus, warm and bright atmosphere`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025å…¨çƒæµè¡Œç¼–æ›²ç‰¹å¾â€”â€”å‰ä»–ä¸»å¯¼+è½»ç”µå­å…ƒç´ èåˆï¼Œ4å’Œå¼¦ç»å…¸èµ°å‘ï¼Œç¨³å®šçš„8åˆ†éŸ³ç¬¦å¾‹åŠ¨ï¼Œå…¼é¡¾æŠ’æƒ…ä¸å¾‹åŠ¨ï¼Œé€‚é…Taylor Swift/Dua Lipaç­‰ä¸»æµæµè¡Œé£æ ¼ã€‚`
            },
            "alt-rock": {
                arrange: `Gritty alternative rock arrangement, 105 BPM, verse: clean guitar riff + minimal drums + bass, chorus: distorted guitar wall + heavy drums + vocal harmonies, bridge: guitar solo + dynamic build up, raw and organic mix, moderate compression`,
                chord: `Minor key progression (A minor), vi-IV-I-V (Am-F-C-G), i-iv-v (Am-Dm-Em), power chords (5th chords), dissonant accents, rock cadence`,
                rhythm: `4/4 time, driving 4th note kick, snare on 2&4 with reverb, guitar riff syncopated with drums, verse: mid-tempo groove, chorus: explosive beat, slight shuffle feel`,
                scene: `Raw and emotional, indie vibe, grunge-influenced, dark and moody, rebellious, intimate live feel, atmospheric guitar layers`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025å¦ç±»æ‘‡æ»šç¼–æ›²ç‰¹å¾â€”â€”å°è°ƒåŸºè°ƒ+å¤±çœŸå‰ä»–å¢™ï¼Œå¼ºåŠ›å’Œå¼¦ä¸ºä¸»ï¼Œé©±åŠ¨å‹é¼“ç»„ï¼Œä¸»æ­Œç®€çº¦å‰¯æ­Œçˆ†å‘ï¼Œé€‚é…Billie Eilish/Fontaines D.C.é£æ ¼ã€‚`
            },
            "hiphop": {
                arrange: `Trap pop hiphop arrangement, 88 BPM, verse: 808 bass + minimal trap drums + melodic synth loop, chorus: full 808 + hi-hats roll + vocal ad-libs + piano keys, bridge: stripped 808 + vocal only + build up, bass-heavy mix, slight auto-tune on vocal`,
                chord: `Minor pentatonic progression (E minor), i-v-vi-iv (Em-Bm-C-Am), vi-ii-V-I (C-Fm-B-Em), simple 2-chord loop, trap harmony, dark consonance`,
                rhythm: `4/4 time, 808 kick on 1&3, rapid hi-hats (16th notes), snare on 2&4 with delay, off-beat bass hits, verse: laid-back trap groove, chorus: tight hi-hats roll`,
                scene: `Urban street vibe, late night mood, melodic rap, chill trap, modern hiphop, club-friendly, smooth and groovy`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025å½“ä»£å˜»å“ˆç¼–æ›²ç‰¹å¾â€”â€”808è´æ–¯ä¸»å¯¼+é™·é˜±é¼“ç»„ï¼Œäº”å£°éŸ³é˜¶å°è°ƒå¾ªç¯ï¼Œ16åˆ†éŸ³ç¬¦è¸©é•²ï¼Œé€‚é…Post Malone/Jack Harlowçš„Melodic Trapé£æ ¼ã€‚`
            },
            "electronic": {
                arrange: `Euphoric EDM pop arrangement, 128 BPM, verse: arpeggiated synth + minimal 4/4 drums + sub bass, chorus: drop with full synth lead + heavy electronic drums + reverb, bridge: breakdown (piano + vocal) + build up with riser, bright mix, wide stereo field`,
                chord: `Major key progression (F major), I-IV-vi-V (F-Bb-Dm-C), ii-V-I (Gm-C-F), uplifting arpeggio chords, electronic cadence, bright consonance`,
                rhythm: `4/4 time, four-to-the-floor kick, clap on 2&4, 16th note hi-hats, build up with cymbal swells, verse: minimal groove, chorus: full 4/4 beat, riser before drop`,
                scene: `Euphoric, festival vibe, dance floor, uplifting, summer anthem, electronic pop crossover, wide and atmospheric`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025æµè¡Œç”µå­ç¼–æ›²ç‰¹å¾â€”â€”4/4åœ°æ¿é¼“+ç¶éŸ³åˆæˆå™¨ï¼Œå¤§è°ƒæ˜äº®å’Œå¼¦ï¼ŒDropæ®µå…¨é¢‘æ®µçˆ†å‘ï¼Œé€‚é…David Guetta/Marshmelloçš„EDM-Popé£æ ¼ã€‚`
            },
            "melancholic": {
                arrange: `Melancholic pop ballad arrangement, 75 BPM, verse: piano solo + soft vocal + subtle cello, chorus: piano + gentle strings + light drums + bass, bridge: vocal only + build up to climax + full strings, intimate mix, low compression, warm reverb`,
                chord: `Minor key progression (B minor), i-iv-v (Bm-Em-F#), vi-ii-V-I (Gm-C-F-Bm), sad chord voicings, suspended chords (Bsus4), melancholic cadence`,
                rhythm: `4/4 time, slow 8th note piano, soft kick on 1, gentle snare on 3, minimal percussion, verse: rubato rhythm, chorus: steady slow beat, emotional timing`,
                scene: `Heartfelt, nostalgic, late night, intimate, emotional storytelling, sad but beautiful, cinematic, vulnerable`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025ä¼¤æ„ŸæŠ’æƒ…ç¼–æ›²ç‰¹å¾â€”â€”é’¢ç´/å¼¦ä¹ä¸»å¯¼ï¼Œå°è°ƒ+æŒ‚ç•™å’Œå¼¦å¢å¼ºæ‚²ä¼¤æ„Ÿï¼Œæ…¢é€Ÿå¾‹åŠ¨ï¼Œä½å‹ç¼©ä¿ç•™æƒ…æ„Ÿç»†èŠ‚ï¼Œé€‚é…åè¯­ä¼¤æ„Ÿæµè¡Œæ›²é£æ ¼ã€‚`
            },
            "chinese-folk": {
                arrange: `Chinese folk pop arrangement, 80 BPM, verse: guzheng + acoustic guitar + soft percussion, chorus: erhu + full folk drums + vocal harmonies + bamboo flute, bridge: traditional instrument solo + build up, warm mix, organic acoustic texture`,
                chord: `Pentatonic scale progression (G major pentatonic), I-IV-V (G-C-D), i-iv-v (Em-Am-Bm), Chinese modal harmony, pentatonic cadence`,
                rhythm: `4/4 time, traditional Chinese percussion (drum + clapper), steady folk groove, verse: minimal percussion, chorus: full folk beat, slight rubato feel`,
                scene: `Ancient Chinese style, jiangnan water town, poetic, nostalgic, cultural fusion, organic and warm, traditional meets modern`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025å›½é£æµè¡Œç¼–æ›²ç‰¹å¾â€”â€”å¤ç­/äºŒèƒ¡/ç«¹ç¬›ç­‰ä¼ ç»Ÿä¹å™¨èåˆå‰ä»–ï¼Œäº”å£°éŸ³é˜¶ä¸ºä¸»ï¼Œä¼ ç»Ÿæ‰“å‡»ä¹å¾‹åŠ¨ï¼Œé€‚é…å‘¨æ°ä¼¦/æ¯›ä¸æ˜“çš„å›½é£æµè¡Œé£æ ¼ã€‚`
            },
            "rnb": {
                arrange: `Neo-soul R&B arrangement, 75 BPM, verse: Rhodes piano + soft bass + minimal drums + vocal ad-libs, chorus: full bass + gentle drums + vocal harmonies + guitar licks, bridge: stripped piano + vocal + build up, smooth mix, warm reverb, breathy vocal`,
                chord: `Minor key progression (B minor), vi-ii-V-I (Gm-C-F-Bm), ii-V-I (Cm-F-Bm), 7th/9th chords (Bm7, Gm9), neo-soul harmony, smooth cadence`,
                rhythm: `4/4 time, laid-back swing feel, soft kick on 1, snare on 2&4 with delay, off-beat bass, verse: minimal groove, chorus: gentle swing beat`,
                scene: `Sultry, late night vibe, intimate, smooth neo-soul, alternative R&B, relaxed, sensual, warm and mellow`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025æ–°ç”Ÿä»£R&Bç¼–æ›²ç‰¹å¾â€”â€”ç½—å¾·é’¢ç´+æ…µæ‡’æ‘‡æ‘†å¾‹åŠ¨ï¼Œ7/9å’Œå¼¦å¢å¼ºé¡ºæ»‘æ„Ÿï¼Œæ°”å£°äººå£°ï¼Œé€‚é…SZA/Bryson Tilleré£æ ¼ã€‚`
            },
            "folk-pop": {
                arrange: `Acoustic folk pop arrangement, 85 BPM, verse: fingerpicked acoustic guitar + vocal only + subtle harmonica, chorus: guitar strumming + light drums + bass + vocal harmonies, bridge: harmonica solo + stripped guitar + build up, organic mix, minimal compression, natural vocal`,
                chord: `Major key progression (G major), I-IV-V (G-C-D), vi-IV-I-V (Em-C-G-D), simple 3-chord progression, folk harmony, open chords`,
                rhythm: `4/4 time, gentle 8th note guitar strum, soft kick on 1&3, brush snare on 2&4, verse: fingerpicking rhythm, chorus: steady strumming beat, organic feel`,
                scene: `Countryside vibe, storytelling, warm and authentic, acoustic, nostalgic, summer afternoon, intimate live feel`,
                note: `é£æ ¼è¯´æ˜ï¼š2020-2025æ°‘è°£æµè¡Œç¼–æ›²ç‰¹å¾â€”â€”åŸå£°å‰ä»–æŒ‡å¼¹/æ‰«å¼¦ä¸»å¯¼ï¼Œä¸‰å’Œå¼¦ä¸ºä¸»ï¼Œæç®€é…å™¨ï¼Œå¼ºè°ƒå™äº‹æ€§ï¼Œé€‚é…Olivia Rodrigo/Vance Joyé£æ ¼ã€‚`
            }
        };

        // å¤åˆ¶ç¼–æ›²Prompt
        function copyArrangePrompt(btn) {
            const promptText = btn.previousElementSibling.textContent;
            navigator.clipboard.writeText(promptText).then(() => {
                showToast('copyToast');
            });
        }

        // æ¸²æŸ“ç¼–æ›²å†…å®¹
        function renderArrangeContent(style) {
            const data = arrangeLib[style];
            const keywordContent = document.getElementById('keywordContent');
            
            keywordContent.innerHTML = `
                <div class="keyword-card">
                    <h3>ç¼–æ›²æ¨¡æ¿</h3>
                    <p>${data.arrange}</p>
                    <button class="copy-btn" onclick="copyArrangePrompt(this)">å¤åˆ¶</button>
                </div>
                <div class="keyword-card">
                    <h3>æ ¸å¿ƒå’Œå¼¦</h3>
                    <p>${data.chord}</p>
                    <button class="copy-btn" onclick="copyArrangePrompt(this)">å¤åˆ¶</button>
                </div>
                <div class="keyword-card">
                    <h3>èŠ‚å¥å‹</h3>
                    <p>${data.rhythm}</p>
                    <button class="copy-btn" onclick="copyArrangePrompt(this)">å¤åˆ¶</button>
                </div>
                <div class="keyword-card">
                    <h3>åœºæ™¯å…³é”®è¯</h3>
                    <p>${data.scene}</p>
                    <button class="copy-btn" onclick="copyArrangePrompt(this)">å¤åˆ¶</button>
                </div>
            `;

            document.getElementById('arrangeNote').textContent = data.note;
        }

        // ç¼–æ›²é£æ ¼åˆ‡æ¢
        document.getElementById('arrangeStyleType').addEventListener('change', function() {
            renderArrangeContent(this.value);
        });
    </script>
</body>
</html>